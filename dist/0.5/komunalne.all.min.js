function Komunalne(){}Komunalne.helper={},Komunalne.util={},Komunalne.format={},Komunalne.test={},Komunalne.$={},Komunalne.dom={},Komunalne.anim={},Komunalne.isOldIE=!1,void 0===window.K&&(window.K=Komunalne),"function"!=typeof String.prototype.trim&&(Komunalne.isOldIE=!0,String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Komunalne.isOldIE=!0,Array.prototype.indexOf=function(n,e){var t;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),r=o.length>>>0;if(0===r)return-1;var i=+e||0;if(Math.abs(i)===1/0&&(i=0),i>=r)return-1;for(t=Math.max(i>=0?i:r-Math.abs(i),0);r>t;){if(t in o&&o[t]===n)return t;t++}return-1}),Array.prototype.forEach||(Komunalne.isOldIE=!0,Array.prototype.forEach=function(n,e){var t,o=void 0;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof n)throw new TypeError(n+" is not a function");for(arguments.length>1&&(o=e),t=0;i>t;){var a;t in r&&(a=r[t],n.call(o,a,t,r)),t++}}),Komunalne.$.elementText=function(n,e){return Komunalne.dom.elementText($(n).get(0),e)},Komunalne.$.fullHeight=function(n){var e;e=function(n){$(n).css("min-height",$(window).height())},n=Komunalne.util.isArray(n)?n:[n],n.forEach(function(n){var t=e.bind(null,n);$(window).resize(t),$(window).load(t)})},Komunalne.anim.animate=function(n,e){var t="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return new Promise(function(o,r){n=Komunalne.util.append("animated",n),$(e).addClass(n).one(t,function(){$(this).removeClass(n),o(this)})})},Komunalne.anim.animation=function(n,e,t,o){var r,i="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",a="webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart";return n=Komunalne.util.append("animated",n),e=$(e),r=function(r,u){var l=function(){e.removeClass(n),o(e),r(e)};e.addClass(n).one(a,t).one(i,l)},new Promise(r)},Komunalne.dom.elementText=function(n,e){var t,o,r=null,i=Komunalne.util.isInstanceOf(n,"string")?document.getElementById(n):n;if(null!=i)if(i.hasChildNodes())if(null!=e){for(t=new Komunalne.helper.Iterator(i.childNodes);t.hasNext()&&(r=t.next(),3!=r.nodeType);)r=null;null!=r?r.nodeValue=e:i.appendChild(document.createTextNode(e))}else{for(o=[],t=new Komunalne.helper.Iterator(i.childNodes);t.hasNext();)r=t.next(),3==r.nodeType&&o.push(r.nodeValue);e=o.join()}else null!=e?i.appendChild(document.createTextNode(e)):e="";else e=null;return e},Komunalne.format.currency=function(n,e,t,o){if("number"!=typeof n)throw"Formatting a non-number";e=""===e||null===e||isNaN(e=Math.abs(e))?2:e,t=void 0!=t?t:".",o=void 0!=o?o:",";var r=0>n?"-":"",i=n.toFixed(e),a=Math.abs(parseInt(i)).toString(),u=Math.abs(i).toString().substr(a.length+1,e);u=u.length<e?u+new Array(e-u.length+1).join("0"):u;for(var l="",s=a.length;s-3>0;s-=3)l=o+a.substr(s-3,3)+l;return l=r+a.substring(0,s)+l,l+(u.length>0?t+u:"")},Komunalne.format.capitalize=function(n){return n[0].toUpperCase()+n.substr(1).toLowerCase()},Komunalne.helper.Method=function(n,e){this.fn=n,this.scope=void 0!=e?e:null},Komunalne.helper.Method.prototype.apply=function(n){return this.fn.apply(this.scope,n)},Komunalne.helper.Method.prototype.call=function(){return this.fn.apply(this.scope,arguments)},Komunalne.helper.Iterator=function(n){this.keys=Komunalne.util.keys(n),this.i=0,this.ref=n},Komunalne.helper.Iterator.keyError="Iterator has not started to retrieve elements",Komunalne.helper.Iterator.nextError="Iterator index out of bounds: ",Komunalne.helper.Iterator.prototype.hasNext=function(){return this.i<this.keys.length},Komunalne.helper.Iterator.prototype.next=function(){if(!this.hasNext())throw Komunalne.helper.Iterator.nextError+this.i;return this.ref[this.keys[this.i++]]},Komunalne.helper.Iterator.prototype.length=function(){return this.keys.length},Komunalne.helper.Iterator.prototype.remaining=function(){return this.length()-this.i},Komunalne.helper.Iterator.prototype.currentKey=function(){if(0===this.i)throw Komunalne.helper.Iterator.keyError;return this.keys[this.i-1]},Komunalne.test.Case=function(n){n=n||{},this.expected=n.expected,this.args=n.args,this.msg=n.msg},Komunalne.test.Case.prototype.execute=function(n,e){var t=[];n=Komunalne.test.Case.transform(n),e=Komunalne.test.Case.transform(e),void 0!==this.expected&&t.push(this.expected),e&&Komunalne.util.isArray(this.args)&&t.push(e.apply(this.args)),void 0!=this.msg&&t.push(this.msg.toString()),n.apply(t)},Komunalne.test.Case.transform=function(n){return Komunalne.util.isFunction(n)?new Komunalne.helper.Method(n):n},Komunalne.test.Suite=function(n){this.cases=void 0==n?[]:Komunalne.util.isArray(n)?n:n instanceof Komunalne.test.Case?[n]:[]},Komunalne.test.Suite.prototype.size=function(){return this.cases.length},Komunalne.test.Suite.prototype.iterator=function(){return new Komunalne.helper.Iterator(this.cases)},Komunalne.test.Suite.prototype.add=function(n,e,t){this.cases.push(new Komunalne.test.Case(n,e,t))},Komunalne.test.Suite.prototype.clear=function(){this.cases=[]},Komunalne.test.Suite.prototype.execute=function(n,e){var t=this.iterator();for(n=Komunalne.test.Case.transform(n),e=Komunalne.test.Case.transform(e);t.hasNext();)t.next().execute(n,e)},function(){window.QUnit&&(QUnit.assert.buildFor=function(n){return new Komunalne.helper.Method(this[n],this)})}(),Komunalne.util.append=function(n,e,t){return((n||"")+(t||" ")+(e||"")).trim()},Komunalne.util.path=function(n,e){if(""===e)return n;var t=e.split("."),o=n;for(var r in t){if(!Komunalne.util.isInstanceOf(o,Object)||void 0===o[t[r]]){o=null;break}o=o[t[r]]}return o},Komunalne.util.isDate=function(n,e){return n instanceof Date&&(!e||!isNaN(n.valueOf()))},Komunalne.util.isFunction=function(n){return"function"==typeof n},Komunalne.util.isIterable=function(n){return"object"==typeof n&&void 0!=n&&!Komunalne.util.isDate(n)},Komunalne.util.isArray=function(n){return Komunalne.util.isIterable(n)&&n.constructor&&n.constructor==Array},Komunalne.util.isInstanceOf=function(n,e){var t;if("string"==typeof e)t=typeof n==e;else{if(!Komunalne.util.isFunction(e))throw"Invalid comparison of "+typeof n+" against "+typeof e;t=n instanceof Object?n.constructor===e:n instanceof e}return t},Komunalne.util.isArrayOf=function(n,e){for(var t=Komunalne.util.isArray(n),o=new Komunalne.helper.Iterator(n,e);t&&o.hasNext();)t=Komunalne.util.isInstanceOf(o.next(),e);return t},Komunalne.util.areSameClass=function(n,e){return typeof n==typeof e&&("object"==typeof n?n.constructor===e.constructor:!0)},Komunalne.util.deepEquals=function(n,e){var t,o,r,i,a,u,l=!0;if(t=Komunalne.util.isIterable(n),o=Komunalne.util.isIterable(e),t&&o&&(l=Komunalne.util.areSameClass(n,e)))for(r=new Komunalne.helper.Iterator(n),i=new Komunalne.helper.Iterator(e),l=r.length()==i.length();r.hasNext()&&l;)a=r.next(),u=i.next(),l=Komunalne.util.deepEquals(a,u),l=l&&r.currentKey()==i.currentKey();else l=t==o&&n===e;return l},Komunalne.util.arrayContains=function(n,e,t){var o,r;if(t===!0)for(o=new Komunalne.helper.Iterator(e),r=!1;o.hasNext()&&!r;)r=Komunalne.util.deepEquals(n,o.next());else r=e.indexOf(n)>=0;return r},Komunalne.util.isAnyOf=function(n){return Komunalne.util.arrayContains(n,Array.prototype.slice.call(arguments,1))},Komunalne.util.arrayConcat=function(){for(var n=[],e=new Komunalne.helper.Iterator(arguments);e.hasNext();)n=n.concat(e.next());return n},Komunalne.util.forEach=function(n,e,t){for(var o=new Komunalne.helper.Iterator(n);o.hasNext();)e.call(t,o.next(),o.currentKey(),n)},Komunalne.util.clone=function(n,e){var t,o,r,i,a=[],u=[],l=!0;if(e=e||{},"into"in e&&(!Komunalne.util.isInstanceOf(e.into,"object")||null==e.into))throw Komunalne.util.clone.invalidTarget;t=function(n,t){return s(n,e,t)},o=function(n){return n},r="skip"in e?Komunalne.util.isArray(e.skip)&&Komunalne.util.isArrayOf(e.skip,"string")?e.skip:Komunalne.util.isInstanceOf(e.skip,"string")?[e.skip]:[]:[],i=function(n){var e,t=Komunalne.util.clone(n);for(var o in t)t[o]=(e=t[o].indexOf("."))>=0?t[o].substr(e+1):"";return t};var s=function(n,e,r){var s,m,f,c;if(null!=n&&Komunalne.util.isInstanceOf(n,"object"))if(Komunalne.util.isInstanceOf(n,Date))s=new Date(n.getTime());else if(e.deep===!0&&(m=a.indexOf(n))>=0)s=u[m];else{if(a.push(n),l&&"into"in e)s=e.into;else try{s=new n.constructor}catch(h){s=n}u.push(s),l=!1,e.deep===!0?(f=t,c=i(r)):(f=o,c=[]);for(var p in n)Komunalne.util.arrayContains(p,r)||(s[p]=e.safe!==!0||void 0===s[p]?f(n[p],c):s[p])}else s=n;return s};return s(n,e,r)},Komunalne.util.clone.invalidTarget="Target object is null or not an object",Komunalne.util.keys=function(n){var e=[];n=n||{};for(var t in n)(!Komunalne.isOldIE||!Komunalne.util.isArray(n)||"indexOf"!=t&&"forEach"!=t)&&e.push(t);return e};