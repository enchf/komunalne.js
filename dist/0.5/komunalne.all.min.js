function Komunalne(){}Komunalne.helper={},Komunalne.util={},Komunalne.format={},Komunalne.test={},Komunalne.$={},Komunalne.dom={},Komunalne.anim={},Komunalne.isOldIE=!1,void 0===window.K&&(window.K=Komunalne),"function"!=typeof String.prototype.trim&&(Komunalne.isOldIE=!0,String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Komunalne.isOldIE=!0,Array.prototype.indexOf=function(n,t){var e;if(null==this)throw new TypeError('"this" is null or not defined');var o=Object(this),r=o.length>>>0;if(0===r)return-1;var i=+t||0;if(Math.abs(i)===1/0&&(i=0),i>=r)return-1;for(e=Math.max(i>=0?i:r-Math.abs(i),0);r>e;){if(e in o&&o[e]===n)return e;e++}return-1}),Array.prototype.forEach||(Komunalne.isOldIE=!0,Array.prototype.forEach=function(n,t){var e,o=void 0;if(null==this)throw new TypeError(" this is null or not defined");var r=Object(this),i=r.length>>>0;if("function"!=typeof n)throw new TypeError(n+" is not a function");for(arguments.length>1&&(o=t),e=0;i>e;){var a;e in r&&(a=r[e],n.call(o,a,e,r)),e++}}),Function.prototype.bind||(Function.prototype.bind=function(n){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),e=this,o=function(){},r=function(){return e.apply(this instanceof o?this:n,t.concat(Array.prototype.slice.call(arguments)))};return this.prototype&&(o.prototype=this.prototype),r.prototype=new o,r}),Komunalne.$.elementText=function(n,t){return Komunalne.dom.elementText($(n).get(0),t)},Komunalne.$.fullHeight=function(n){var t;t=function(n){$(n).css("min-height",$(window).height())},n=Komunalne.util.isArray(n)?n:[n],n.forEach(function(n){var e=t.bind(null,n);$(window).resize(e),$(window).load(e)})},Komunalne.anim.animate=function(n,t){var e="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return new Promise(function(o,r){n=Komunalne.util.append("animated",n),$(t).addClass(n).one(e,function(){$(this).removeClass(n),o(this)})})},Komunalne.anim.animation=function(n,t,e,o){var r,i="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",a="webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart";return n=Komunalne.util.append("animated",n),t=$(t),r=function(r,u){var l=function(){t.removeClass(n),o(t),r(t)};t.addClass(n).one(a,e).one(i,l)},new Promise(r)},Komunalne.dom.elementText=function(n,t){var e,o,r=null,i=Komunalne.util.isInstanceOf(n,"string")?document.getElementById(n):n;if(null!=i)if(i.hasChildNodes())if(null!=t){for(e=new Komunalne.helper.Iterator(i.childNodes);e.hasNext()&&(r=e.next(),3!=r.nodeType);)r=null;null!=r?r.nodeValue=t:i.appendChild(document.createTextNode(t))}else{for(o=[],e=new Komunalne.helper.Iterator(i.childNodes);e.hasNext();)r=e.next(),3==r.nodeType&&o.push(r.nodeValue);t=o.join()}else null!=t?i.appendChild(document.createTextNode(t)):t="";else t=null;return t},Komunalne.format.currency=function(n,t,e,o){if("number"!=typeof n)throw"Formatting a non-number";t=""===t||null===t||isNaN(t=Math.abs(t))?2:t,e=void 0!=e?e:".",o=void 0!=o?o:",";var r=0>n?"-":"",i=n.toFixed(t),a=Math.abs(parseInt(i)).toString(),u=Math.abs(i).toString().substr(a.length+1,t);u=u.length<t?u+new Array(t-u.length+1).join("0"):u;for(var l="",s=a.length;s-3>0;s-=3)l=o+a.substr(s-3,3)+l;return l=r+a.substring(0,s)+l,l+(u.length>0?e+u:"")},Komunalne.format.capitalize=function(n){return n[0].toUpperCase()+n.substr(1).toLowerCase()},Komunalne.helper.Method=function(n,t){this.fn=n,this.scope=void 0!=t?t:null},Komunalne.helper.Method.prototype.apply=function(n){return this.fn.apply(this.scope,n)},Komunalne.helper.Method.prototype.call=function(){return this.fn.apply(this.scope,arguments)},Komunalne.helper.Iterator=function(n){this.keys=Komunalne.util.keys(n),this.i=0,this.ref=n},Komunalne.helper.Iterator.keyError="Iterator has not started to retrieve elements",Komunalne.helper.Iterator.nextError="Iterator index out of bounds: ",Komunalne.helper.Iterator.prototype.hasNext=function(){return this.i<this.keys.length},Komunalne.helper.Iterator.prototype.next=function(){if(!this.hasNext())throw Komunalne.helper.Iterator.nextError+this.i;return this.ref[this.keys[this.i++]]},Komunalne.helper.Iterator.prototype.length=function(){return this.keys.length},Komunalne.helper.Iterator.prototype.remaining=function(){return this.length()-this.i},Komunalne.helper.Iterator.prototype.currentKey=function(){if(0===this.i)throw Komunalne.helper.Iterator.keyError;return this.keys[this.i-1]},Komunalne.test.Case=function(n){n=n||{},this.expected=n.expected,this.args=n.args,this.msg=n.msg},Komunalne.test.Case.prototype.execute=function(n,t){var e=[];n=Komunalne.test.Case.transform(n),t=Komunalne.test.Case.transform(t),void 0!==this.expected&&e.push(this.expected),t&&Komunalne.util.isArray(this.args)&&e.push(t.apply(this.args)),void 0!=this.msg&&e.push(this.msg.toString()),n.apply(e)},Komunalne.test.Case.transform=function(n){return Komunalne.util.isFunction(n)?new Komunalne.helper.Method(n):n},Komunalne.test.Suite=function(n){this.cases=void 0==n?[]:Komunalne.util.isArray(n)?n:n instanceof Komunalne.test.Case?[n]:[]},Komunalne.test.Suite.prototype.size=function(){return this.cases.length},Komunalne.test.Suite.prototype.iterator=function(){return new Komunalne.helper.Iterator(this.cases)},Komunalne.test.Suite.prototype.add=function(n,t,e){this.cases.push(new Komunalne.test.Case(n,t,e))},Komunalne.test.Suite.prototype.clear=function(){this.cases=[]},Komunalne.test.Suite.prototype.execute=function(n,t){var e=this.iterator();for(n=Komunalne.test.Case.transform(n),t=Komunalne.test.Case.transform(t);e.hasNext();)e.next().execute(n,t)},function(){window.QUnit&&(QUnit.assert.buildFor=function(n){return new Komunalne.helper.Method(this[n],this)})}(),Komunalne.util.append=function(n,t,e){return((n||"")+(e||" ")+(t||"")).trim()},Komunalne.util.path=function(n,t){if(""===t)return n;var e=t.split("."),o=n;for(var r in e){if(!Komunalne.util.isInstanceOf(o,Object)||void 0===o[e[r]]){o=null;break}o=o[e[r]]}return o},Komunalne.util.isDate=function(n,t){return n instanceof Date&&(!t||!isNaN(n.valueOf()))},Komunalne.util.isFunction=function(n){return"function"==typeof n},Komunalne.util.isIterable=function(n){return"object"==typeof n&&void 0!=n&&!Komunalne.util.isDate(n)},Komunalne.util.isArray=function(n){return Komunalne.util.isIterable(n)&&n.constructor&&n.constructor==Array},Komunalne.util.isInstanceOf=function(n,t){var e;if("string"==typeof t)e=typeof n==t;else{if(!Komunalne.util.isFunction(t))throw"Invalid comparison of "+typeof n+" against "+typeof t;e=n instanceof Object?n.constructor===t:n instanceof t}return e},Komunalne.util.isArrayOf=function(n,t){for(var e=Komunalne.util.isArray(n),o=new Komunalne.helper.Iterator(n,t);e&&o.hasNext();)e=Komunalne.util.isInstanceOf(o.next(),t);return e},Komunalne.util.areSameClass=function(n,t){return typeof n==typeof t&&("object"==typeof n?n.constructor===t.constructor:!0)},Komunalne.util.deepEquals=function(n,t){var e,o,r,i,a,u,l=!0;if(e=Komunalne.util.isIterable(n),o=Komunalne.util.isIterable(t),e&&o&&(l=Komunalne.util.areSameClass(n,t)))for(r=new Komunalne.helper.Iterator(n),i=new Komunalne.helper.Iterator(t),l=r.length()==i.length();r.hasNext()&&l;)a=r.next(),u=i.next(),l=Komunalne.util.deepEquals(a,u),l=l&&r.currentKey()==i.currentKey();else l=e==o&&n===t;return l},Komunalne.util.arrayContains=function(n,t,e){var o,r;if(e===!0)for(o=new Komunalne.helper.Iterator(t),r=!1;o.hasNext()&&!r;)r=Komunalne.util.deepEquals(n,o.next());else r=t.indexOf(n)>=0;return r},Komunalne.util.isAnyOf=function(n){return Komunalne.util.arrayContains(n,Array.prototype.slice.call(arguments,1))},Komunalne.util.arrayConcat=function(){for(var n=[],t=new Komunalne.helper.Iterator(arguments);t.hasNext();)n=n.concat(t.next());return n},Komunalne.util.forEach=function(n,t,e){for(var o=new Komunalne.helper.Iterator(n);o.hasNext();)t.call(e,o.next(),o.currentKey(),n)},Komunalne.util.clone=function(n,t){var e,o,r,i,a=[],u=[],l=!0;if(t=t||{},"into"in t&&(!Komunalne.util.isInstanceOf(t.into,"object")||null==t.into))throw Komunalne.util.clone.invalidTarget;e=function(n,e){return s(n,t,e)},o=function(n){return n},r="skip"in t?Komunalne.util.isArray(t.skip)&&Komunalne.util.isArrayOf(t.skip,"string")?t.skip:Komunalne.util.isInstanceOf(t.skip,"string")?[t.skip]:[]:[],i=function(n){for(var t,e,o,r=Komunalne.util.clone(n),i=new Komunalne.helper.Iterator(r);i.hasNext();)e=i.next(),o=i.currentKey(),r[o]=(t=r[o].indexOf("."))>=0?r[o].substr(t+1):"";return r};var s=function(n,t,r){var s,m,c,f;if(null!=n&&Komunalne.util.isInstanceOf(n,"object"))if(Komunalne.util.isInstanceOf(n,Date))s=new Date(n.getTime());else if(t.deep===!0&&(m=a.indexOf(n))>=0)s=u[m];else{if(a.push(n),l&&"into"in t)s=t.into;else try{s=new n.constructor}catch(p){s=n}u.push(s),l=!1,t.deep===!0?(c=e,f=i(r)):(c=o,f=[]);for(var h in n)Komunalne.util.arrayContains(h,r)||(s[h]=t.safe!==!0||void 0===s[h]?c(n[h],f):s[h])}else s=n;return s};return s(n,t,r)},Komunalne.util.clone.invalidTarget="Target object is null or not an object",Komunalne.util.keys=function(n){var t=[];n=n||{};for(var e in n)Komunalne.isOldIE&&(Komunalne.util.isArray(n)&&("indexOf"==e||"forEach"==e)||Komunalne.util.isInstanceOf(n,"string")&&"trim"==e||Komunalne.util.isFunction(n)&&"bind"==e)||t.push(e);return t};